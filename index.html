
<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKS Ultimate Electrical Tool</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/616/616494.png">
    <style>
        :root { --primary: #007AFF; --bg: #f2f2f7; --card: #ffffff; --text: #1c1c1e; --accent: #8e8e93; }
        [data-theme="dark"] { --bg: #000000; --card: #1c1c1e; --text: #ffffff; --accent: #8e8e93; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 30px; }
        .header { background: var(--card); padding: 15px; text-align: center; box-shadow: 0 1px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; display: flex; justify-content: space-between; align-items: center; }
        .tabs { display: flex; overflow-x: auto; background: var(--card); padding: 10px; gap: 8px; border-bottom: 1px solid #ddd; scrollbar-width: none; }
        .tab-btn { padding: 8px 18px; border: none; background: #e5e5ea; border-radius: 15px; cursor: pointer; white-space: nowrap; font-weight: 600; font-size: 13px; }
        .tab-btn.active { background: var(--primary); color: white; }
        .container { padding: 15px; max-width: 650px; margin: auto; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        .card { background: var(--card); padding: 18px; border-radius: 14px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 15px; }
        h3 { margin: 0 0 15px 0; font-size: 15px; color: var(--primary); border-left: 4px solid var(--primary); padding-left: 10px; }
        label { display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; }
        input, select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; background: var(--bg); color: var(--text); box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; background: var(--primary); color: white; font-weight: bold; cursor: pointer; }
        .result-box { margin-top: 10px; padding: 15px; background: #007AFF10; border-radius: 10px; text-align: center; color: var(--primary); font-weight: bold; line-height: 1.8; }
        .res-highlight { font-size: 24px; display: block; margin: 5px 0; color: #ff3b30; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="header">
    <div style="width:30px"></div>
    <h2 style="font-size: 16px; margin:0;">âš¡ EKS ULTIMATE PRO</h2>
    <div onclick="toggleTheme()" style="cursor:pointer; font-size: 20px;">ðŸŒ“</div>
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab(event, 'ohm_pf')">Ohm & PF</button>
    <button class="tab-btn" onclick="showTab(event, 'load_breaker')">Load & Breaker</button>
    <button class="tab-btn" onclick="showTab(event, 'cable_tab')">Cable & Drop</button>
    <button class="tab-btn" onclick="showTab(event, 'energy_tab')">Energy Cost</button>
    <button class="tab-btn" onclick="showTab(event, 'earth_gen')">Earth & Gen</button>
</div>

<div class="container">
    <div id="ohm_pf" class="tab-content active">
        <div class="card">
            <h3>Ohm's Law</h3>
            <label>Find What?</label>
            <select id="o_type" onchange="updateOhmLabels()">
                <option value="v">Voltage (V = I Ã— R)</option>
                <option value="i">Current (I = V / R)</option>
                <option value="r">Resistance (R = V / I)</option>
            </select>
            <input type="number" id="o_v1" placeholder="Enter Value 1">
            <input type="number" id="o_v2" placeholder="Enter Value 2">
            <button onclick="calcOhm()">Calculate Ohm</button>
            <div class="result-box" id="res_ohm">Result: 0</div>
        </div>
        <div class="card">
            <h3>PF Correction (kVAR)</h3>
            <label>Load (kW)</label><input type="number" id="pf_kw">
            <label>Original PF</label><input type="number" id="pf_orig" value="0.75">
            <label>Target PF</label><input type="number" id="pf_target" value="0.95">
            <button onclick="calcKVAR()">Find kVAR</button>
            <div class="result-box" id="res_pf">Required: 0 kVAR</div>
        </div>
    </div>

    <div id="load_breaker" class="tab-content">
        <div class="card">
            <h3>Load Current Calculation</h3>
            <label>System Phase</label>
            <select id="l_ph"><option value="1">Single Phase (230V)</option><option value="3">Three Phase (400V)</option></select>
            <label>Power (Watts)</label>
            <input type="number" id="l_w" placeholder="e.g. 5000">
            <label>Power Factor (CosÏ†)</label>
            <input type="number" id="l_pf" value="0.8">
            <button onclick="calcLoad()">Calculate</button>
            <div class="result-box" id="res_load">Load Current: 0 A<br>MCB: -</div>
        </div>
    </div>

    <div id="cable_tab" class="tab-content">
        <div class="card">
            <h3>Cable Sizing (BS 7671)</h3>
            <label>Design Current (Ib) - Amps</label>
            <input type="number" id="c_ib" placeholder="Amps">
            <label>Correction Factor (Ca Ã— Cg Ã— Ci)</label>
            <input type="number" id="c_fact" value="1">
            <button onclick="calcCable()">Find Cable Size</button>
            <div class="result-box" id="res_cable">
                It (Required): 0 A<br>
                Cable Size:<br>
                <span class="res-highlight" id="res_csize">- mmÂ²</span>
            </div>
        </div>
        <div class="card">
            <h3>Voltage Drop Check</h3>
            <label>Length (Meters)</label><input type="number" id="v_l">
            <label>Current (Amps)</label><input type="number" id="v_i">
            <label>mV/A/m</label><input type="number" id="v_mv" placeholder="from Catalogue">
            <button onclick="calcVDrop()">Check Drop</button>
            <div class="result-box" id="res_vdrop">Drop: 0 V</div>
        </div>
    </div>

    <div id="energy_tab" class="tab-content">
        <div class="card">
            <h3>Energy Cost Calculation</h3>
            <label>Load (Watts)</label><input type="number" id="en_w">
            <label>Daily Usage (Hours)</label><input type="number" id="en_h" value="5">
            <label>Unit Price (MMK)</label><input type="number" id="en_price" value="150">
            <button onclick="calcEnergy()">Calculate Monthly Cost</button>
            <div class="result-box" id="res_en">0 MMK</div>
        </div>
    </div>

    <div id="earth_gen" class="tab-content">
        <div class="card">
            <h3>Earth Rod Resistance</h3>
            <label>Soil Resistivity (Î©-m)</label><input type="number" id="e_sr">
            <label>Length (m)</label><input type="number" id="e_l" value="2.4">
            <button onclick="calcEarth()">Find Î©</button>
            <div class="result-box" id="res_earth">0 Î©</div>
        </div>
        <div class="card">
            <h3>Generator Sizing</h3>
            <label>Total Power (kW)</label><input type="number" id="g_kw">
            <button onclick="calcGen()">Find kVA</button>
            <div class="result-box" id="res_gen">0 kVA</div>
        </div>
    </div>
</div>

<script>
    function showTab(e, id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        e.currentTarget.classList.add('active');
    }

    function toggleTheme() {
        document.body.hasAttribute('data-theme') ? document.body.removeAttribute('data-theme') : document.body.setAttribute('data-theme', 'dark');
    }

    function calcLoad() {
        let ph = document.getElementById('l_ph').value;
        let w = parseFloat(document.getElementById('l_w').value) || 0;
        let pf = parseFloat(document.getElementById('l_pf').value) || 0.8;
        let amp = (ph == "1") ? (w/(230*pf)) : (w/(400*1.732*pf));
        let mcb = [6, 10, 16, 20, 25, 32, 40, 50, 63, 80, 100, 125, 160, 200, 250, 400].find(r => r > amp) || "-";
        document.getElementById('res_load').innerHTML = `Load Current: ${amp.toFixed(2)} A<br>MCB Size: ${mcb}A`;
        document.getElementById('c_ib').value = amp.toFixed(2);
        document.getElementById('v_i').value = amp.toFixed(2);
    }

    function calcCable() {
        let ib = parseFloat(document.getElementById('c_ib').value) || 0;
        let f = parseFloat(document.getElementById('c_fact').value) || 1;
        let it = ib / f;
        const cableTable = [[1.5,14.5],[2.5,20],[4,26],[6,34],[10,46],[16,61],[25,80],[35,99],[50,119],[70,151],[95,182],[120,210],[150,240],[185,273],[240,321],[300,367]];
        let size = cableTable.find(r => r[1] >= it);
        document.getElementById('res_csize').innerText = size ? size[0] + " mmÂ²" : "Out of Range";
        document.getElementById('res_cable').innerHTML = `It (Required): ${it.toFixed(2)} A<br>Cable Size:<br><span class="res-highlight">${size ? size[0]+" mmÂ²" : "N/A"}</span>`;
    }

    function calcOhm() {
        let type = document.getElementById('o_type').value;
        let v1 = parseFloat(document.getElementById('o_v1')) || 0;
        let v2 = parseFloat(document.getElementById('o_v2')) || 0;
        let res = (type==='v') ? v1*v2 : v1/v2;
        document.getElementById('res_ohm').innerText = "Result: " + res.toFixed(2);
    }

    function calcKVAR() {
        let p = parseFloat(document.getElementById('pf_kw').value) || 0;
        let pf1 = parseFloat(document.getElementById('pf_orig').value) || 0.7;
        let pf2 = parseFloat(document.getElementById('pf_target').value) || 0.95;
        let kvar = p * (Math.tan(Math.acos(pf1)) - Math.tan(Math.acos(pf2)));
        document.getElementById('res_pf').innerText = "Required: " + kvar.toFixed(2) + " kVAR";
    }

    function calcEnergy() {
        let w = parseFloat(document.getElementById('en_w').value) || 0;
        let h = parseFloat(document.getElementById('en_h').value) || 0;
        let p = parseFloat(document.getElementById('en_price').value) || 0;
        let cost = (w * h * 30 / 1000) * p;
        document.getElementById('res_en').innerText = cost.toLocaleString() + " MMK / Month";
    }

    function calcVDrop() {
        let l = parseFloat(document.getElementById('v_l').value) || 0;
        let i = parseFloat(document.getElementById('v_i').value) || 0;
        let mv = parseFloat(document.getElementById('v_mv').value) || 0;
        document.getElementById('res_vdrop').innerText = "Drop: " + ((mv * i * l) / 1000).toFixed(2) + " V";
    }

    function calcEarth() {
        let p = parseFloat(document.getElementById('e_sr').value) || 0;
        let l = parseFloat(document.getElementById('e_l').value) || 2.4;
        let res = (p / (2 * 3.1415 * l)) * (Math.log((8 * l) / 0.016) - 1);
        document.getElementById('res_earth').innerText = res.toFixed(2) + " Î©";
    }

    function calcGen() {
        let kw = parseFloat(document.getElementById('g_kw').value) || 0;
        document.getElementById('res_gen').innerText = (kw / 0.8 * 1.25).toFixed(2) + " kVA";
    }
</script>
</body>
</html>

