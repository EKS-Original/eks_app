<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKS Electrical Ultimate Tool</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/616/616494.png">
    <style>
        :root { --primary: #007AFF; --bg: #f5f5f7; --card: #ffffff; --text: #1d1d1f; --accent: #8e8e93; }
        [data-theme="dark"] { --bg: #000000; --card: #1c1c1e; --text: #ffffff; --accent: #8e8e93; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; padding-bottom: 50px; }
        .header { background: var(--card); padding: 15px; text-align: center; box-shadow: 0 1px 0 rgba(0,0,0,0.1); sticky; top: 0; z-index: 100; display: flex; justify-content: space-between; align-items: center; }
        .tabs { display: flex; overflow-x: auto; background: var(--card); padding: 10px; border-bottom: 1px solid rgba(0,0,0,0.1); gap: 10px; }
        .tab-btn { padding: 8px 20px; border: none; background: #e5e5ea; color: #3a3a3c; border-radius: 20px; cursor: pointer; white-space: nowrap; font-weight: 600; }
        .tab-btn.active { background: var(--primary); color: white; }
        .container { padding: 15px; max-width: 600px; margin: auto; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; }
        h3 { margin: 0 0 15px 0; font-size: 16px; color: var(--primary); text-transform: uppercase; letter-spacing: 0.5px; }
        label { display: block; margin-bottom: 5px; font-size: 12px; color: var(--accent); }
        input, select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; background: var(--bg); color: var(--text); box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; background: var(--primary); color: white; transition: 0.2s; }
        .result-box { margin-top: 10px; padding: 12px; background: #007AFF10; border-radius: 8px; text-align: center; font-weight: bold; font-size: 18px; color: var(--primary); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="header">
    <div style="width:20px"></div>
    <h1 style="font-size: 18px; margin:0;">âš¡ EKS ULTIMATE</h1>
    <div onclick="toggleTheme()" style="cursor:pointer">ðŸŒ“</div>
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab(event, 'ac')">AC Power</button>
    <button class="tab-btn" onclick="showTab(event, 'motor')">Motor</button>
    <button class="tab-btn" onclick="showTab(event, 'dc')">DC / Ohm</button>
    <button class="tab-btn" onclick="showTab(event, 'conv')">Converters</button>
</div>

<div class="container">
    <div id="ac" class="tab-content active">
        <div class="card">
            <h3>1. Find kW & kVA</h3>
            <select id="ac1_ph"><option value="1">1 Phase</option><option value="3">3 Phase</option></select>
            <input type="number" id="ac1_v" placeholder="Voltage (V)">
            <input type="number" id="ac1_i" placeholder="Current (A)">
            <input type="number" id="ac1_pf" value="0.8" placeholder="PF">
            <button onclick="calcAC1()">Calculate</button>
            <div class="result-box" id="res_ac1">kW: 0 | kVA: 0</div>
        </div>
        <div class="card">
            <h3>2. Find Amps (from kW)</h3>
            <select id="ac2_ph"><option value="1">1 Phase</option><option value="3">3 Phase</option></select>
            <input type="number" id="ac2_kw" placeholder="Power (kW)">
            <input type="number" id="ac2_v" value="400">
            <button onclick="calcAC2()">Find Amps</button>
            <div class="result-box" id="res_ac2">0.00 Amps</div>
        </div>
        <div class="card">
            <h3>3. Capacitor Bank (kVAR)</h3>
            <input type="number" id="kv_kw" placeholder="Current kW">
            <input type="number" id="kv_pf1" placeholder="Current PF (e.g. 0.7)">
            <input type="number" id="kv_pf2" value="0.95" placeholder="Target PF">
            <button onclick="calcKVAR()">Find kVAR Required</button>
            <div class="result-box" id="res_kvar">0.00 kVAR</div>
        </div>
    </div>

    <div id="motor" class="tab-content">
        <div class="card">
            <h3>4. Motor Slip (%)</h3>
            <input type="number" id="sl_sync" placeholder="Sync Speed (RPM)">
            <input type="number" id="sl_act" placeholder="Actual Speed (RPM)">
            <button onclick="calcSlip()">Find Slip</button>
            <div class="result-box" id="res_slip">0 %</div>
        </div>
        <div class="card">
            <h3>5. Motor Torque (Nm)</h3>
            <input type="number" id="tq_kw" placeholder="Motor kW">
            <input type="number" id="tq_rpm" placeholder="Speed (RPM)">
            <button onclick="calcTorque()">Find Torque</button>
            <div class="result-box" id="res_tq">0.00 Nm</div>
        </div>
        <div class="card">
            <h3>6. Star-Delta Current</h3>
            <input type="number" id="sd_line" placeholder="Line Current (A)">
            <button onclick="calcSD()">Find Phase Current</button>
            <div class="result-box" id="res_sd">Phase I: 0.00 A</div>
        </div>
    </div>

    <div id="dc" class="tab-content">
        <div class="card">
            <h3>7. Ohm's Law (Find V/I/R)</h3>
            <select id="ohm_type">
                <option value="v">Find Voltage (I * R)</option>
                <option value="i">Find Current (V / R)</option>
                <option value="r">Find Resistance (V / I)</option>
            </select>
            <input type="number" id="ohm_1" placeholder="Value 1">
            <input type="number" id="ohm_2" placeholder="Value 2">
            <button onclick="calcOhm()">Calculate</button>
            <div class="result-box" id="res_ohm">Result: 0</div>
        </div>
        <div class="card">
            <h3>8. Series/Parallel Resistance</h3>
            <input type="text" id="res_list" placeholder="Values (e.g. 10,20,30)">
            <button onclick="calcResist(true)">Series</button>
            <button onclick="calcResist(false)" style="margin-top:5px; background:#666;">Parallel</button>
            <div class="result-box" id="res_total">Total: 0 Î©</div>
        </div>
    </div>

    <div id="conv" class="tab-content">
        <div class="card">
            <h3>9. Unit Conversions</h3>
            <input type="number" id="c_val" placeholder="Value">
            <select id="c_type">
                <option value="hp_kw">HP to kW</option>
                <option value="kw_hp">kW to HP</option>
                <option value="kva_kw">kVA to kW (0.8pf)</option>
                <option value="mm_awg">mmÂ² to AWG (Approx)</option>
                <option value="in_cm">Inch to CM</option>
                <option value="f_c">Fahrenheit to Celsius</option>
            </select>
            <button onclick="unitConv()">Convert</button>
            <div class="result-box" id="res_c">Result: 0</div>
        </div>
        <div class="card">
            <h3>10. Battery Runtime</h3>
            <input type="number" id="bt_ah" placeholder="Battery Ah">
            <input type="number" id="bt_v" value="12">
            <input type="number" id="bt_w" placeholder="Load Watts">
            <button onclick="calcBat()">Find Hours</button>
            <div class="result-box" id="res_bat">0.00 Hours</div>
        </div>
    </div>
</div>

<script>
    function showTab(e, id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        e.currentTarget.classList.add('active');
    }

    function toggleTheme() {
        document.body.hasAttribute('data-theme') ? document.body.removeAttribute('data-theme') : document.body.setAttribute('data-theme', 'dark');
    }

    // 1. AC Power kW/kVA
    function calcAC1() {
        let ph = document.getElementById('ac1_ph').value;
        let v = parseFloat(document.getElementById('ac1_v').value) || 0;
        let i = parseFloat(document.getElementById('ac1_i').value) || 0;
        let pf = parseFloat(document.getElementById('ac1_pf').value) || 0.8;
        let kw = (ph == "1") ? (v*i*pf/1000) : (1.732*v*i*pf/1000);
        document.getElementById('res_ac1').innerText = "kW: "+kw.toFixed(2)+" | kVA: "+(kw/pf).toFixed(2);
    }


